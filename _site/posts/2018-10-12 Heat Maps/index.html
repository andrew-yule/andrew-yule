<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Andrew Yule">
<meta name="dcterms.date" content="2018-10-12">
<meta name="description" content="How to improve insights into complicated onshore pipeline networks">

<title>Andrew Yule - Improving Operations Through Visualization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Andrew Yule</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">Posts</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../About.html">About</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../Contact.html">Contact</a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/ayule89/"><i class="bi bi-linkedin" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/ayule89"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ayule89"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">
<!--?xml version="1.0" encoding="UTF-8"?-->


<!-- Created with the Wolfram Language : www.wolfram.com -->



 <title>
  2018-10-12 Heat Maps
 </title>
 <link href="HTMLFiles/2018-10-12 Heat Maps.css" rel="stylesheet" type="text/css">




<p class="Title">
 Improving Operations Through Visualization
</p>



<p class="Subsection">
 How do you understand thermal-hydraulic behavior in large pipeline networks?
</p>



<p class="Text">
 This was the exact question I asked myself during some of the recent work we kicked off to look at a an onshore midstream hydrocarbon distribution network.<br><br>Spending the majority of my time working on offshore fields, the technical challenges are obviously there, but the infrastructures you work with are generally pretty simple. A few wells tying into a manifold, followed by a single subsea tieback to a host facility is a typical scenario. Under those conditions, things like temperature and pressure can easily be visualized through profile plots of a particular pipeline like the one below.<br><br><span class="InputInline"><span><img src="HTMLFiles/2018-10-12 Heat Maps_1.gif" alt="2018-10-12 Heat Maps_1.gif" width="605" height="204" style="vertical-align:middle"></span></span><br><br>Compare that to onshore networks, and in particular, midstream companies operating networks, where you can end up with 100’s of pipelines with numerous “sources” or feeds joining the system, and “sinks” or feeds leaving the system. Answering very specific questions about that network can be done, but getting an understanding of the entire system under certain scenarios is difficult.
</p>



<p class="Subsection">
 Visualization to the rescue!
</p>



<p class="Text">
 One of the best ways to understand data is to be able to visualize it. When that data is in the context of a geographical layout, then what I have come to realize is that the best approach to visualization should be something that embraces that geographical dependency. Enter heat maps.<br><br><span class="InputInline"><span><img src="HTMLFiles/2018-10-12 Heat Maps_2.gif" alt="2018-10-12 Heat Maps_2.gif" width="746" height="347" style="vertical-align:middle"></span></span><br><br>In the above examples, you can see a few of the visualizations created for some onshore pipeline networks looking at things like temperatures and pressures through a field. In most cases, the coloring of the lines allows for very clear picture of where in the system higher values are located. This helps to understand e.g. where bottlenecks might be which could be caused by insufficiently size pipes or excess flow that needs to be diverted.
</p>



<p class="Subsection">
 General workflow
</p>



<p class="Text">
 So what’s required to make one of these? Well the fundamental process is actually fairly easy to understand, but like anything, the devil is in the details.<br><br>First, we need a starting GIS file of some kind, which defines our coordinates (lat/longs) of the various pipelines. Next, we need a source of data describing the values we’re interested in displaying for each of the pipelines. Finally, we need to take that data we’re interested in viewing, create an overall scale for it (low to high), and then essentially transpose it with our GIS data.<br><br>In terms of specifics, the diagram below shows the high-level technology stacks that make this possible. First, a GIS file is used to build a simulation. In my case this is typically PIPESIM, which has the benefits of a.) having built-in GIS support and b.) having a python API. The python API allows for information on the distances of each pipeline along with their coordinates to be extracted automatically. Next, I use the Wolfram Language’s geo-related functions to scale my simulation data along the actual GIS coordinates of a particular pipeline. Finally, the generated data is written into a kml file as plain text where it may be viewed by 3rd party software or loaded back in to the Wolfram Language.<br><span><span><img src="HTMLFiles/2018-10-12 Heat Maps_3.gif" alt="2018-10-12 Heat Maps_3.gif" width="591" height="502" style="vertical-align:middle"></span></span>
</p>



<p class="Subsection">
 Looking ahead
</p>



<p class="Text">
 Numerous software (PIPESIM included) now have the ability to generate heat maps natively within their user interfaces. What’s unique about this technology is that the end result is a kml file. This allows the heat map to be opened by numerous 3rd party pieces of software such as Google Earth and Global Mapper and probably more importantly, it allows results to be shared easily across entire organizations.<br><br>I have utilized this technology now on several projects and throughout that process have managed to bring it to a fairly mature state. It can be adapted to all kinds of data sources whether they be simulation / software generated, or actual field data and the GIS data can come from a number of sources as well.
</p>










<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Improving Operations Through Visualization</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Energy</div>
    <div class="quarto-category">Visualization</div>
    <div class="quarto-category">Wolfram Language</div>
    <div class="quarto-category">Python</div>
  </div>
  </div>

<div>
  <div class="description">
    How to improve insights into complicated onshore pipeline networks
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Andrew Yule </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 12, 2018</p>
    </div>
  </div>
    
  </div>
  

</header>




</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>